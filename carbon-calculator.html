<!DOCTYPE html>
<html lang="en">
<!-- Previous head section remains the same -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Footprint Calculator</title>
    <!-- Explicitly load Chart.js from a reliable CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Your carbon calculator script -->
<script src="your-carbon-calculator-script.js"></script>
    <style>
        /* All previous styles remain the same */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }
        .nav-icons {
            display: flex;
            justify-content: space-around;
            background-color: #333;
            padding: 10px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .nav-icons div {
            color: white;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
            padding: 5px;
        }
        .nav-icons div.active {
            font-weight: bold;
            border-bottom: 2px solid #28a745;
        }
        .container {
            padding: 20px;
            text-align: center;
        }
        .bucket {
            display: none;
        }
        .bucket.active {
            display: block;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }
        input, select {
            padding: 10px;
            font-size: 14px;
            width: 100%;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        input[type="range"] {
            width: 100%;
        }
        input[type="checkbox"] {
            width: auto;
            margin-right: 5px;
        }
        .result-box {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            text-align: left;
        } 
        
        /* Commute Section Styles */
.commute-options {
    margin-top: 30px;
}

.commute-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.commute-option {
    cursor: pointer;
    padding: 15px;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
}

.commute-option:hover {
    border-color: #28a745 !important;
    background-color: #f8f9fa;
}

.distance-input {
    display: none;
    margin-top: 20px;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
}

.slider-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
}

.vehicle-type-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-top: 10px;
}

.vehicle-type-option {
    cursor: pointer;
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
}

.vehicle-type-option:hover {
    border-color: #28a745 !important;
    background-color: #f8f9fa;
}

.two-wheeler-type {
    margin-bottom: 15px;
}

.passenger-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 15px;
    margin-top: 10px;
}

.passenger-option {
    cursor: pointer;
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
}

.passenger-option:hover {
    border-color: #28a745 !important;
    background-color: #f8f9fa;
}

.car-type {
    margin-bottom: 20px;
}

.car-type-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 10px;
}

.car-type-option {
    cursor: pointer;
    padding: 15px;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.car-type-option:hover {
    border-color: #28a745 !important;
    background-color: #f8f9fa;
}

.eco-message {
    margin-bottom: 10px;
}

.eco-message.success {
    color: #28a745;
}

.eco-message.warning {
    color: #ffc107;
}

.eco-message.danger {
    color: #dc3545;
}

.ride-sharing {
    margin-bottom: 20px;
}

.km-input {
    display: none;
}

.next-button {
    margin-top: 30px;
}
.flight-grid, .train-grid, .car-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.flight-option, .train-option, .car-option {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

.flight-option small {
    font-size: inherit;
}

.flight-option .flight-count-box,
.train-option .journey-count-box,
.car-option .trip-count-box {
    display: flex;
    align-items: center;
    gap: 5px;
}

.flight-count-box button, 
.journey-count-box button, 
.trip-count-box button {
    padding: 0 8px;
    font-size: 16px;
    background-color: #28a745;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

input[type="number"] {
    width: 40px;
    text-align: center;
    font-weight: bold;
    border: 1px solid #ddd;
    border-radius: 4px;
}

button:hover {
    background-color: #218838;
}
 /* Lifestyle Section Styles */
.diet-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.diet-option {
    cursor: pointer;
    padding: 15px;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
}

.diet-option:hover {
    background-color: #f8f9fa;
    border-color: #28a745;
}

.slider-section {
    display: none;
    margin-top: 20px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
}

.slider-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
}

.slider-wrapper input {
    flex: 1;
}

.fashion-buttons button,
.compost-buttons button {
    margin-right: 10px;
    padding: 8px 16px;
    background-color: #28a745;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.fashion-buttons button:hover,
.compost-buttons button:hover {
    background-color: #218838;
}
.diet-option.active,
.fashion-buttons button.active,
.compost-buttons button.active {
    border-color: #28a745;
    background-color: #f8f9fa;
    font-weight: bold;
}
 /* RESULT Section Styles */
 #bucket-result {
            background-color: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 30px;
            max-width: 600px;
            margin: 0 auto;
        }

        #bucket-result h2 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        #personal-greeting {
            text-align: center;
            color: #6c757d;
            margin-bottom: 25px;
        }

        #personal-name-display {
            color: #28a745;
            font-weight: 600;
        }

        #total-footprint {
            background-color: #f1f3f5;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            padding: 25px;
            margin-bottom: 25px;
        }

        #total-carbon-footprint {
            color: #28a745;
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        #total-footprint p {
            color: #6c757d;
        }

        #bucket-footprints {
            display: grid;
            gap: 15px;
        }

        #bucket-footprints p {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background-color: white;
            transition: all 0.3s ease;
        }

        #bucket-footprints p:hover {
            border-color: #28a745;
            background-color: #f8f9fa;
        }

        #energy-footprint span,
        #commute-footprint span,
        #travel-footprint span,
        #lifestyle-footprint span {
            color: #28a745;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            #bucket-result {
                padding: 20px;
                margin: 20px;
            }

            #total-carbon-footprint {
                font-size: 36px;
            }
        }
/* Chart Bucket Style */
        .chart-container {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}
.pie-chart-container, 
.bar-chart-container {
    width: 45%; /* Adjust as needed */
}
@media (max-width: 768px) {
    .chart-container {
        flex-direction: column;
    }
    .pie-chart-container, 
    .bar-chart-container {
        width: 100%;
        margin-bottom: 20px;
    }
}
    </style>
</head>
<body>
    <!-- Navigation section remains the same -->
    <div class="nav-icons">
        <div id="nav-personal" class="active" onclick="showBucket('personal')">üë§ Personal Info</div>
        <div id="nav-energy" onclick="showBucket('energy')">‚ö° Energy</div>
        <div id="nav-commute" onclick="showBucket('commute')">üöó Commute</div>
        <div id="nav-travel" onclick="showBucket('travel')">‚úàÔ∏è Travel</div>
        <div id="nav-lifestyle" onclick="showBucket('lifestyle')">üè† Lifestyle</div>
        <div id="nav-result" onclick="showBucket('result')">üìä Result</div>
    </div>

    <!-- Container for Inputs -->
    <div class="container">
        <!-- Personal Info bucket remains the same -->
        <div id="bucket-personal" class="bucket active">
            <h2>Personal Information</h2>

            <label for="name">Name:</label>
           <input type="text" id="personal-name">

            <label for="email">Email ID:</label>
            <input type="email" id="email" placeholder="Email@.com">

            <label for="pincode">Pincode:</label>
            <input type="text" id="pincode" placeholder="Enter your pincode">

            <label for="household">No. of people living in your household:</label>
            <input type="range" id="household" min="1" max="20" value="1" oninput="updateHouseholdValue(this.value)">
            <span id="household-value">1</span>

            <label for="age">Age:</label>
            <input type="number" id="age" min="1" max="120" placeholder="Enter your age">

            <label for="gender">Gender:</label>
            <select id="gender">
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
            </select>

            <button onclick="nextBucket('energy')">Next</button>
        </div>

        <!--Energy bucket -->
        <div id="bucket-energy" class="bucket">
            <h2>Energy Consumption</h2>

            <label for="electricity-units">Average electricity units per month:</label>
            <input type="number" id="electricity-units" placeholder="Enter units" oninput="clearBillField()">

            <label>
                <input type="checkbox" id="dont-know-units" onclick="toggleBillInput()"> Don't know your units?
            </label>

            <div id="bill-input-container" style="display: none; margin-top: 10px;">
                <label for="electricity-bill">Enter your monthly electricity bill (in Rupees):</label>
                <input type="number" id="electricity-bill" placeholder="Enter bill amount" oninput="calculateUnitsFromBill()">
                
                <!-- Added display box for estimated units -->
                <div class="result-box">
                    <p style="margin: 0;"><strong>Estimated Units:</strong></p>
                    <input type="text" id="estimated-units" readonly style="background-color: #fff; margin-top: 5px;">
                </div>
            </div>

<!-- LPG Cylinders -->
<label for="lpg-cylinders">How many LPG cylinders do you use monthly?</label>
<div style="display: flex; align-items: center; gap: 10px;">
    <input type="range" id="lpg-cylinders" min="0" max="5" value="0" step="1" oninput="updateSliderValue('lpg-cylinders')">
    <span id="lpg-cylinders-value">0</span>
</div>

<!-- Geysers -->
<label for="geysers">How many Geysers do you use regularly?</label>
<div style="display: flex; align-items: center; gap: 10px;">
    <input type="range" id="geysers" min="0" max="5" value="0" step="1" oninput="updateSliderValue('geysers')">
    <span id="geysers-value">0</span>
</div>

<!-- Solar Setup Section -->
<div style="margin-top: 20px;">
    <p style="font-weight: bold;">Do you have..</p>
    
    <!-- Solar PV Setup -->
    <div style="margin: 10px 0;">
        <button type="button" id="solar-pv-btn" 
                style="background-color: #6c757d;" 
                onclick="toggleSolarSection('solar-pv')">
            Solar PV Setup
        </button>
        <div id="solar-pv-section" style="display: none; margin-top: 10px;">
            <label for="solar-pv-kwp">Capacity (kWp):</label>
            <div style="display: flex; align-items: center; gap: 10px;">
                <input type="range" id="solar-pv-kwp" min="1" max="1000" value="1" 
                       oninput="updateSliderValue('solar-pv-kwp')">
                <span id="solar-pv-kwp-value">1</span>
            </div>
        </div>
    </div>
    
    <!-- Solar Water Heater -->
    <div style="margin: 10px 0;">
        <button type="button" id="solar-water-btn" 
                style="background-color: #6c757d;" 
                onclick="toggleSolarSection('solar-water')">
            Solar Water Heater
        </button>
        <div id="solar-water-section" style="display: none; margin-top: 10px;">
            <label for="solar-water-capacity">Capacity (Liters):</label>
            <div style="display: flex; align-items: center; gap: 10px;">
                <input type="range" id="solar-water-capacity" min="1" max="1000" value="1" 
                       oninput="updateSliderValue('solar-water-capacity')">
                <span id="solar-water-capacity-value">1</span>
            </div>
        </div>
    </div>
</div>
            <button onclick="nextBucket('commute')">Next</button>
        </div>

        <!-- Commute bucket -->
        <div id="bucket-commute" class="bucket">
            <h2>Daily Commute</h2>
            
            <!-- Work from home slider -->
            <div class="slider-container">
                <label for="wfh-days">How many days a week do you work from home?</label>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <input type="range" id="wfh-days" min="0" max="7" value="0" oninput="updateSliderValue('wfh-days')">
                    <span id="wfh-days-value">0</span>
                </div>
            </div>
        
            <!-- Commute mode selection -->
            <div class="commute-options">
                <label>Choose your mode of everyday commute:</label>
                <div class="commute-grid">
                    <!-- Walk/Cycle Option -->
                    <div class="commute-option" onclick="toggleCommuteOption('walk-cycle')">
                        üö∂‚Äç‚ôÇÔ∏è Walk/Cycle
                    </div>
                    
                    <!-- Public Transport Option -->
                    <div class="commute-option" onclick="toggleCommuteOption('public-transport')">
                        üöå Public Transport
                    </div>
        
                    <!-- Two Wheeler Option -->
                    <div class="commute-option" onclick="toggleCommuteOption('two-wheeler')">
                        üõµ Two Wheeler
                    </div>
        
                    <!-- Three Wheeler Option -->
                    <div class="commute-option" onclick="toggleCommuteOption('three-wheeler')">
                        üõ∫ Three Wheeler
                    </div>
        
                    <!-- Four Wheeler Option -->
                    <div class="commute-option" onclick="toggleCommuteOption('four-wheeler')">
                        üöó Four Wheeler
                    </div>
                </div>
        
                <!-- Distance inputs for each mode -->
                <div id="walk-cycle-distance" class="distance-input">
                    <p class="eco-message success">
                        Wow, zero emissions! You're a true champion of sustainable commuting! üå±
                    </p>
                    <label for="walk-cycle-km">Daily average roundtrip distance (km):</label>
                    <div class="slider-wrapper">
                        <input type="range" id="walk-cycle-km" min="0" max="100" value="0" 
                               oninput="updateSliderValue('walk-cycle-km')">
                        <span id="walk-cycle-km-value">0</span>
                    </div>
                </div>
        
                <div id="public-transport-distance" class="distance-input">
                    <p class="eco-message success">
                        Great choice! Public transport means fewer cars on the road and a cleaner planet! üåç
                    </p>
                    <label for="public-transport-km">Daily average roundtrip distance (km):</label>
                    <div class="slider-wrapper">
                        <input type="range" id="public-transport-km" min="0" max="100" value="0"
                               oninput="updateSliderValue('public-transport-km')">
                        <span id="public-transport-km-value">0</span>
                    </div>
                </div>
        
                <!-- Two Wheeler Options -->
                <div id="two-wheeler-distance" class="distance-input">
                    <p class="eco-message success">
                        A convenient way to glide through traffic. Keep up the great work! üõµ
                    </p>
                    <div class="two-wheeler-type">
                        <label>Choose your type of two-wheeler:</label>
                        <div class="vehicle-type-grid">
                            <div class="vehicle-type-option" onclick="selectTwoWheelerType('electric')">
                                ‚ö° Electric
                            </div>
                            <div class="vehicle-type-option" onclick="selectTwoWheelerType('petrol')">
                                ‚õΩ Petrol
                            </div>
                        </div>
                    </div>
                    <div id="two-wheeler-electric-message" class="eco-message success">
                        You're riding into the future with this low-carbon option. Keep it up! üîã
                    </div>
                    <div id="two-wheeler-petrol-message" class="eco-message warning">
                        A decent option for quick travel, but consider sharing rides or switching to electric to lower emissions! ‚ôªÔ∏è
                    </div>
                    <div class="km-input">
                        <label for="two-wheeler-km">Daily average roundtrip distance (km):</label>
                        <div class="slider-wrapper">
                            <input type="range" id="two-wheeler-km" min="0" max="100" value="0"
                                   oninput="updateSliderValue('two-wheeler-km')">
                            <span id="two-wheeler-km-value">0</span>
                        </div>
                    </div>
                </div>
        
                <!-- Three Wheeler Distance -->
                <div id="three-wheeler-distance" class="distance-input">
                    <p class="eco-message success">
                        Small footprint, big impact! Auto rides are better than driving alone in a car! üõ∫
                    </p>
                    <label for="three-wheeler-km">Daily average roundtrip distance (km):</label>
                    <div class="slider-wrapper">
                        <input type="range" id="three-wheeler-km" min="0" max="100" value="0"
                               oninput="updateSliderValue('three-wheeler-km')">
                        <span id="three-wheeler-km-value">0</span>
                    </div>
                </div>
        
                <!-- Four Wheeler Options -->
                <div id="four-wheeler-distance" class="distance-input">
                    <p class="eco-message success">
                        Great choice on opting for a car! Let's make your commute as eco-friendly as possible.
                    </p>
                    
                    <!-- Ride sharing section -->
                    <div class="ride-sharing">
                        <label>Are you sharing the ride with others?</label>
                        <p class="eco-message warning">
                            Traveling alone in a car increases emissions‚Äîconsider carpooling for a greener commute!
                        </p>
                        <div class="passenger-grid">
                            <div class="passenger-option" onclick="selectPassengers(1)">
                                üë§ 1 person
                            </div>
                            <div class="passenger-option" onclick="selectPassengers(2)">
                                üë• 2 persons
                            </div>
                            <div class="passenger-option" onclick="selectPassengers(3)">
                                üë•üë§ 3 persons
                            </div>
                            <div class="passenger-option" onclick="selectPassengers(4)">
                                üë•üë• 4+ persons
                            </div>
                        </div>
                    </div>
        
                    <!-- Car type selection -->
                    <div class="car-type">
                        <label>Select the type of car:</label>
                        <div class="car-type-grid">
                            <div class="car-type-option" onclick="selectCarType('electric')">
                                ‚ö° Electric Car
                            </div>
                            <div class="car-type-option" onclick="selectCarType('hatchback')">
                                üöó Hatchback/Sedan
                            </div>
                            <div class="car-type-option" onclick="selectCarType('suv')">
                                üöô SUV
                            </div>
                        </div>
                    </div>
        
                    <!-- Car type specific messages -->
                    <div id="car-electric-message" class="eco-message success">
                        Driving electric? You're leading the way in sustainable travel! üåü
                    </div>
                    <div id="car-hatchback-message" class="eco-message warning">
                        Good choice! Go greener by carpooling or switching to electric! üå±
                    </div>
                    <div id="car-suv-message" class="eco-message danger">
                        SUVs have one of the largest carbon footprints. Consider switching to a smaller vehicle, public transport, or carpooling to reduce emissions! ‚ö†Ô∏è
                    </div>
        
                    <!-- Distance input -->
                    <div class="km-input">
                        <label for="four-wheeler-km">Daily average roundtrip distance (km):</label>
                        <div class="slider-wrapper">
                            <input type="range" id="four-wheeler-km" min="0" max="200" value="0"
                                   oninput="updateSliderValue('four-wheeler-km')">
                            <span id="four-wheeler-km-value">0</span>
                        </div>
                    </div>
                </div>
            </div>
        
            <button onclick="nextBucket('travel')" class="next-button">Next</button>
        </div>

        <div id="bucket-travel" class="bucket">
            <h2>Flights</h2>
            <p>How many flights did you take last year? Please select multiple options to match your flight duration.</p>
        
            <!-- Flight options grid -->
            <div class="flight-grid">
                <!-- Short-haul flight -->
                <div class="flight-option">
                    <small>‚úàÔ∏è</small>
                    <p>Short-haul</p>
                    <small>Up to 3 hours (avg. 1000 km)</small>
                    <div class="flight-count-box">
                        <button onclick="decrementFlightCount('shortHaul')">-</button>
                        <input type="number" id="shortHaul-count" min="0" value="0" onchange="updateFlightCount('shortHaul')">
                        <button onclick="incrementFlightCount('shortHaul')">+</button>
                    </div>
                </div>
        
                <!-- Medium-haul flight -->
                <div class="flight-option">
                    <small style="font-size: 20px;">‚úàÔ∏è</small>
                    <p>Medium-haul</p>
                    <small>3‚Äì6 hours (avg. 2750 km)</small>
                    <div class="flight-count-box">
                        <button onclick="decrementFlightCount('mediumHaul')">-</button>
                        <input type="number" id="mediumHaul-count" min="0" value="0" onchange="updateFlightCount('mediumHaul')">
                        <button onclick="incrementFlightCount('mediumHaul')">+</button>
                    </div>
                </div>
        
                <!-- Long-haul flight -->
                <div class="flight-option">
                    <small style="font-size: 24px;">‚úàÔ∏è</small>
                    <p>Long-haul</p>
                    <small>6‚Äì12 hours (avg. 6500 km)</small>
                    <div class="flight-count-box">
                        <button onclick="decrementFlightCount('longHaul')">-</button>
                        <input type="number" id="longHaul-count" min="0" value="0" onchange="updateFlightCount('longHaul')">
                        <button onclick="incrementFlightCount('longHaul')">+</button>
                    </div>
                </div>
        
                <!-- Ultra-long-haul flight -->
                <div class="flight-option">
                    <small style="font-size: 28px;">‚úàÔ∏è</small>
                    <p>Ultra-long-haul</p>
                    <small>Over 12 hours (avg. 12000 km)</small>
                    <div class="flight-count-box">
                        <button onclick="decrementFlightCount('ultraLongHaul')">-</button>
                        <input type="number" id="ultraLongHaul-count" min="0" value="0" onchange="updateFlightCount('ultraLongHaul')">
                        <button onclick="incrementFlightCount('ultraLongHaul')">+</button>
                    </div>
                </div>
            </div>
        
            <!-- Train Journey Section -->
            <h2>Train Journeys</h2>
            <p>How many train journeys did you take last year? Select multiple to match your trip distance.</p>
            <div class="train-grid">
                <div class="train-option">
                    üöÑ
                    <p>Short Journey</p>
                    <small>Under 200 km</small>
                    <div class="journey-count-box">
                        <button onclick="decrementJourneyCount('shortTrain')">-</button>
                        <input type="number" id="shortTrain-count" min="0" value="0" onchange="updateJourneyCount('shortTrain')">
                        <button onclick="incrementJourneyCount('shortTrain')">+</button>
                    </div>
                </div>
        
                <div class="train-option">
                    üöÑ
                    <p>Medium Journey</p>
                    <small>200-400 km</small>
                    <div class="journey-count-box">
                        <button onclick="decrementJourneyCount('mediumTrain')">-</button>
                        <input type="number" id="mediumTrain-count" min="0" value="0" onchange="updateJourneyCount('mediumTrain')">
                        <button onclick="incrementJourneyCount('mediumTrain')">+</button>
                    </div>
                </div>
        
                <div class="train-option">
                    üöÑ
                    <p>Long Journey</p>
                    <small>Over 1000 km</small>
                    <div class="journey-count-box">
                        <button onclick="decrementJourneyCount('longTrain')">-</button>
                        <input type="number" id="longTrain-count" min="0" value="0" onchange="updateJourneyCount('longTrain')">
                        <button onclick="incrementJourneyCount('longTrain')">+</button>
                    </div>
                </div>
            </div>
        
            <!-- Car Journey Section -->
            <h2>Car Trips</h2>
            <p>How many car trips did you take last year? Select multiple to match your trip distance.</p>
            <div class="car-grid">
                <!-- Gasoline Car -->
                <div class="car-category">
                    <h3>Gasoline Car Trips</h3>
                    <div class="car-option">
                        üöó Short Trip (< 400 km)
                        <div class="trip-count-box">
                            <button onclick="decrementTripCount('shortGasoline')">-</button>
                            <input type="number" id="shortGasoline-count" min="0" value="0" onchange="updateTripCount('shortGasoline')">
                            <button onclick="incrementTripCount('shortGasoline')">+</button>
                        </div>
                    </div>
        
                    <div class="car-option">
                        üöó Medium Trip (400-600 km)
                        <div class="trip-count-box">
                            <button onclick="decrementTripCount('mediumGasoline')">-</button>
                            <input type="number" id="mediumGasoline-count" min="0" value="0" onchange="updateTripCount('mediumGasoline')">
                            <button onclick="incrementTripCount('mediumGasoline')">+</button>
                        </div>
                    </div>
        
                    <div class="car-option">
                        üöó Long Trip (> 1000 km)
                        <div class="trip-count-box">
                            <button onclick="decrementTripCount('longGasoline')">-</button>
                            <input type="number" id="longGasoline-count" min="0" value="0" onchange="updateTripCount('longGasoline')">
                            <button onclick="incrementTripCount('longGasoline')">+</button>
                        </div>
                    </div>
                </div>
        
                <!-- Electric Car -->
                <div class="car-category">
                    <h3>Electric Car Trips</h3>
                    <div class="car-option">
                        üöô Short Trip (< 400 km)
                        <div class="trip-count-box">
                            <button onclick="decrementTripCount('shortElectric')">-</button>
                            <input type="number" id="shortElectric-count" min="0" value="0" onchange="updateTripCount('shortElectric')">
                            <button onclick="incrementTripCount('shortElectric')">+</button>
                        </div>
                    </div>
        
                    <div class="car-option">
                        üöô Medium Trip (400-600 km)
                        <div class="trip-count-box">
                            <button onclick="decrementTripCount('mediumElectric')">-</button>
                            <input type="number" id="mediumElectric-count" min="0" value="0" onchange="updateTripCount('mediumElectric')">
                            <button onclick="incrementTripCount('mediumElectric')">+</button>
                        </div>
                    </div>
        
                    <div class="car-option">
                        üöô Long Trip (> 1000 km)
                        <div class="trip-count-box">
                            <button onclick="decrementTripCount('longElectric')">-</button>
                            <input type="number" id="longElectric-count" min="0" value="0" onchange="updateTripCount('longElectric')">
                            <button onclick="incrementTripCount('longElectric')">+</button>
                        </div>
                    </div>
                </div>
            </div>
            <button onclick="nextBucket('lifestyle')" class="next-button">Next</button>
        </div>
        
        <div id="bucket-lifestyle" class="bucket">
            <h2>Lifestyle</h2>
        
            <!-- Food Preferences Section -->
            <p>Select your dietary preferences and provide details.</p>
            <div class="diet-grid">
                <!-- Vegan -->
                <div class="diet-option" onclick="toggleDietOption('vegan')">
                    üå± Vegan
                </div>
        
                <!-- Vegetarian -->
                <div class="diet-option" onclick="toggleDietOption('vegetarian')">
                    ü•¶ Vegetarian
                </div>
        
                <!-- Ovo-Vegetarian -->
                <div class="diet-option" onclick="toggleDietOption('ovoVegetarian')">
                    üç≥ Ovo-Vegetarian
                </div>
        
                <!-- Non-Vegetarian -->
                <div class="diet-option" onclick="toggleDietOption('nonVegetarian')">
                    üçó Non-Vegetarian
                </div>
            </div>
        
            <!-- Vegan Meals -->
            <div id="vegan-slider" class="slider-section">
                <h3>Vegan Meals</h3>
                <label>How many Vegan meals do you have in a week?</label>
                <div class="slider-wrapper">
                    <input type="range" id="vegan-meals" min="0" max="50" value="0" oninput="updateSliderValue('vegan-meals', 'vegan-message')">
                    <span id="vegan-meals-value">0</span>
                </div>
                <p id="vegan-message">You're making a significant impact on the environment. Keep up the good work!</p>
            </div>
        
            <!-- Vegetarian Meals -->
            <div id="vegetarian-slider" class="slider-section">
                <h3>Vegetarian Meals</h3>
                <label>How many Vegetarian meals do you have in a week? (containing dairy & other milk products)</label>
                <div class="slider-wrapper">
                    <input type="range" id="vegetarian-meals" min="0" max="50" value="0" oninput="updateSliderValue('vegetarian-meals', 'vegetarian-message')">
                    <span id="vegetarian-meals-value">0</span>
                </div>
                <p id="vegetarian-message">Thank you for choosing a more sustainable diet.</p>
            </div>
        
            <!-- Ovo-Vegetarian Meals -->
            <div id="ovoVegetarian-slider" class="slider-section">
                <h3>Egg Meals</h3>
                <label>How many Egg meals do you have in a week?</label>
                <div class="slider-wrapper">
                    <input type="range" id="ovoVegetarian-meals" min="0" max="50" value="0" oninput="updateSliderValue('ovoVegetarian-meals', 'ovoVegetarian-message')">
                    <span id="ovoVegetarian-meals-value">0</span>
                </div>
                <p id="ovoVegetarian-message">Enjoy your eggs responsibly!</p>
            </div>
        
            <!-- Non-Vegetarian Meals -->
            <div id="nonVegetarian-slider" class="slider-section">
                <h3>Non-Vegetarian Meals</h3>
                <label>1) How many Non-vegetarian meals do you have in a week? (Fish & Chicken)</label>
                <div class="slider-wrapper">
                    <input type="range" id="nonVegetarian-meals" min="0" max="50" value="0" oninput="updateSliderValue('nonVegetarian-meals', 'nonVegetarian-message')">
                    <span id="nonVegetarian-meals-value">0</span>
                </div>
                <label>2) How many red meat meals do you have in a week? (Mutton & Beef)</label>
                <div class="slider-wrapper">
                    <input type="range" id="redMeat-meals" min="0" max="50" value="0" oninput="updateSliderValue('redMeat-meals', 'redMeat-message')">
                    <span id="redMeat-meals-value">0</span>
                </div>
                <p id="redMeat-message">Did you know that reducing meat consumption can significantly reduce your carbon footprint? Let's make informed choices for a sustainable future.</p>
            </div>
        
            <!-- Fashion Section -->
            <h3>Fashion</h3>
            <label>How often do you buy new clothing?</label>
            <div class="fashion-buttons">
                <button onclick="selectFashionFrequency('once')">Once a Month</button>
                <button onclick="selectFashionFrequency('twice')">Twice a Month</button>
                <button onclick="selectFashionFrequency('thrice')">Thrice a Month</button>
            </div>
        
            <!-- Compost Section -->
            <h3>Compost</h3>
            <label>Do you compost wet waste at your home?</label>
            <div class="compost-buttons">
                <button onclick="selectCompostOption('yes')">Yes</button>
                <button onclick="selectCompostOption('no')">No</button>
            </div>
        
            <button onclick="calculateAndDisplayResults()">Submit</button>
        </div>      

        <!-- RESULTS SECTION-->>
        <div id="bucket-result" class="bucket">
            <h2>Result</h2>
            <p id="personal-greeting">Dear <span id="personal-name-display"></span>, here's your Personal Carbon Story: A closer look at how you contribute to global emissions.</p>
        
            <!-- Big number to display the total carbon footprint -->
            <div id="total-footprint">
                <h1 id="total-carbon-footprint" style="font-size: 48px; font-weight: bold;"></h1>
                <p>Annual Carbon Footprint in Ton CO‚ÇÇe</p>
            </div>
        
            <!-- Individual footprints for each bucket -->
            <div id="bucket-footprints">
                <p id="energy-footprint">Here's your footprint from energy consumption: <span id="energy-footprint-value"></span> Kg CO‚ÇÇe</p>
                <p id="commute-footprint">Here's your footprint from commuting: <span id="commute-footprint-value"></span> Kg CO‚ÇÇe</p>
                <p id="travel-footprint">Here's your footprint from travel: <span id="travel-footprint-value"></span> Kg CO‚ÇÇe</p>
                <p id="lifestyle-footprint">Here's your footprint from lifestyle choices: <span id="lifestyle-footprint-value"></span> Kg CO‚ÇÇe</p>
            </div>
        </div>
        
        <div class="chart-container">
            <div class="pie-chart-container">
                <canvas id="footprintPieChart" width="400" height="400"></canvas>
            </div>
            <div class="bar-chart-container">
                <canvas id="footprintBarChart" width="400" height="400"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Previous functions remain the same 
        function showBucket(bucket) {
            const allBuckets = document.querySelectorAll('.bucket');
            const allNavIcons = document.querySelectorAll('.nav-icons div');
            
            allBuckets.forEach(b => b.classList.remove('active'));
            allNavIcons.forEach(nav => nav.classList.remove('active'));

            document.getElementById(`bucket-${bucket}`).classList.add('active');
            document.getElementById(`nav-${bucket}`).classList.add('active');
        }

        function nextBucket(next) {
            showBucket(next);
        }

        function updateHouseholdValue(value) {
            document.getElementById('household-value').innerText = value;
        }

        function toggleBillInput() {
            const billInputContainer = document.getElementById('bill-input-container');
            const checkbox = document.getElementById('dont-know-units');
            const electricityUnitsField = document.getElementById('electricity-units');

            if (checkbox.checked) {
                billInputContainer.style.display = 'block';
                electricityUnitsField.value = ''; // Clear units if checkbox is checked
            } else {
                billInputContainer.style.display = 'none';
                document.getElementById('electricity-bill').value = ''; // Clear bill field
                document.getElementById('estimated-units').value = ''; // Clear estimated units
            }
        }

        function clearBillField() {
            const electricityBillField = document.getElementById('electricity-bill');
            const checkbox = document.getElementById('dont-know-units');

            if (checkbox.checked) {
                electricityBillField.value = ''; // Clear the bill field
                document.getElementById('estimated-units').value = ''; // Clear estimated units
            }
        }

        // Updated function to calculate units from bill
        function calculateUnitsFromBill() {
            const bill = parseFloat(document.getElementById('electricity-bill').value);
            const estimatedUnitsField = document.getElementById('estimated-units');
            let units = 0;

            if (!isNaN(bill)) {
                if (bill <= 0 || bill <= 200) {
                    // Default 125 units for bills up to ‚Çπ200
                    units = 125;
                } else {
                    // For bills over ‚Çπ200, calculate based on ‚Çπ7.11 per unit
                    units = bill / 7.11;
                }
                
                // Display the calculated units with 2 decimal places
                estimatedUnitsField.value = units.toFixed(2) + " units";
            } else {
                estimatedUnitsField.value = ""; // Clear if invalid input
            }
        }
        function toggleSolarSection(section) {
        const sectionDiv = document.getElementById(section + '-section');
        const btn = document.getElementById(section + '-btn');
        
        if (sectionDiv.style.display === 'none') {
            sectionDiv.style.display = 'block';
            btn.style.backgroundColor = '#28a745'; // Change button color to indicate open state
        } else {
            sectionDiv.style.display = 'none';
            btn.style.backgroundColor = '#6c757d'; // Reset button color
        }
    }

    function updateSliderValue(sliderId) {
        const slider = document.getElementById(sliderId);
        const valueSpan = document.getElementById(sliderId + '-value');
        valueSpan.textContent = slider.value;
    }
// Function to update slider value display
function updateSliderValue(sliderId) {
    const slider = document.getElementById(sliderId);
    const display = document.getElementById(`${sliderId}-value`);
    display.textContent = slider.value;
}

// Commute 
// Commute 
function toggleCommuteOption(option) {
    const optionElement = document.querySelector(`[onclick="toggleCommuteOption('${option}')"]`);
    const distanceInput = document.getElementById(`${option}-distance`);
    
    // Check if the current option is already selected
    const isCurrentlySelected = optionElement.classList.contains('selected');
    
    if (isCurrentlySelected) {
        // Deselect if already selected
        optionElement.style.borderColor = '#ddd';
        optionElement.classList.remove('selected');
        distanceInput.style.display = 'none';
        
        // Additional resets for specific options
        if (option === 'four-wheeler') {
            resetCarOptions();
        } else if (option === 'two-wheeler') {
            resetTwoWheelerOptions();
        }
        
        // Reset sliders to zero for the specific option
        const optionSliders = document.querySelectorAll(`#${option}-distance input[type="range"]`);
        optionSliders.forEach(slider => {
            slider.value = 0;
            // Update corresponding value display if it exists
            const valueDisplay = document.getElementById(`${slider.id}-value`);
            if (valueDisplay) {
                valueDisplay.textContent = '0';
            }
        });
    } else {
        // Select the option
        optionElement.style.borderColor = '#28a745';
        optionElement.classList.add('selected');
        distanceInput.style.display = 'block';
        
        // Additional setup for specific options
        if (option === 'four-wheeler') {
            document.querySelector('.ride-sharing').style.display = 'block';
            document.querySelector('.car-type').style.display = 'block';
        } else if (option === 'two-wheeler') {
            document.querySelector('.two-wheeler-type').style.display = 'block';
        }
    }
}

// Rest of the script remains the same (other functions are unchanged)
// Function to reset two-wheeler options
function resetTwoWheelerOptions() {
    const vehicleTypes = document.querySelectorAll('.vehicle-type-option');
    vehicleTypes.forEach(element => {
        element.style.borderColor = '#ddd';
        element.classList.remove('selected');
    });
    document.getElementById('two-wheeler-electric-message').style.display = 'none';
    document.getElementById('two-wheeler-petrol-message').style.display = 'none';
    document.querySelector('#two-wheeler-distance .km-input').style.display = 'none';
    document.querySelector('.two-wheeler-type').style.display = 'none';
}

// Function to select two-wheeler type
function selectTwoWheelerType(type) {
    const electricOption = document.querySelector('[onclick="selectTwoWheelerType(\'electric\')"]');
    const petrolOption = document.querySelector('[onclick="selectTwoWheelerType(\'petrol\')"]');
    const electricMessage = document.getElementById('two-wheeler-electric-message');
    const petrolMessage = document.getElementById('two-wheeler-petrol-message');
    const kmInput = document.querySelector('#two-wheeler-distance .km-input');
    
    // Reset both options
    electricOption.style.borderColor = '#ddd';
    petrolOption.style.borderColor = '#ddd';
    electricOption.classList.remove('selected');
    petrolOption.classList.remove('selected');
    electricMessage.style.display = 'none';
    petrolMessage.style.display = 'none';
    
    // Set selected option
    const selectedOption = type === 'electric' ? electricOption : petrolOption;
    const selectedMessage = type === 'electric' ? electricMessage : petrolMessage;
    
    selectedOption.style.borderColor = '#28a745';
    selectedOption.classList.add('selected');
    selectedMessage.style.display = 'block';
    
    // Show km input after selection
    kmInput.style.display = 'block';
}

// Function to handle passenger selection
function selectPassengers(count) {
    const options = document.querySelectorAll('.passenger-option');
    options.forEach(option => {
        option.style.borderColor = '#ddd';
        option.classList.remove('selected');
    });
    const selectedOption = options[count - 1];
    selectedOption.style.borderColor = '#28a745';
    selectedOption.classList.add('selected');
}

// Function to reset car options
function resetCarOptions() {
    const passengerOptions = document.querySelectorAll('.passenger-option');
    const carTypeOptions = document.querySelectorAll('.car-type-option');
    
    passengerOptions.forEach(option => {
        option.style.borderColor = '#ddd';
        option.classList.remove('selected');
    });
    carTypeOptions.forEach(option => {
        option.style.borderColor = '#ddd';
        option.classList.remove('selected');
    });
    
    document.getElementById('car-electric-message').style.display = 'none';
    document.getElementById('car-hatchback-message').style.display = 'none';
    document.getElementById('car-suv-message').style.display = 'none';
    document.querySelector('#four-wheeler-distance .km-input').style.display = 'none';
    document.querySelector('.ride-sharing').style.display = 'none';
    document.querySelector('.car-type').style.display = 'none';
}

// Function to handle car type selection
function selectCarType(type) {
    const options = document.querySelectorAll('.car-type-option');
    options.forEach(option => {
        option.style.borderColor = '#ddd';
        option.classList.remove('selected');
    });
    
    // Hide all messages first
    document.getElementById('car-electric-message').style.display = 'none';
    document.getElementById('car-hatchback-message').style.display = 'none';
    document.getElementById('car-suv-message').style.display = 'none';
    
    // Show selected option and message
    const selectedOption = document.querySelector(`[onclick="selectCarType('${type}')"]`);
    selectedOption.style.borderColor = '#28a745';
    selectedOption.classList.add('selected');
    document.getElementById(`car-${type}-message`).style.display = 'block';
    
    // Show the km input after car type is selected
    document.querySelector('#four-wheeler-distance .km-input').style.display = 'block';
}

// Initialize all slider values when the document loads
document.addEventListener('DOMContentLoaded', function() {
    const sliderIds = [
        'wfh-days', 
        'walk-cycle-km', 
        'public-transport-km', 
        'two-wheeler-km', 
        'three-wheeler-km', 
        'four-wheeler-km'
    ];
    sliderIds.forEach(id => updateSliderValue(id));
});
// Function for travel bucket
function incrementFlightCount(type) { modifyCount(type, 1); }
function decrementFlightCount(type) { modifyCount(type, -1); }
function updateFlightCount(type) { ensureNonNegative(type); }

function incrementJourneyCount(type) { modifyCount(type, 1); }
function decrementJourneyCount(type) { modifyCount(type, -1); }
function updateJourneyCount(type) { ensureNonNegative(type); }

function incrementTripCount(type) { modifyCount(type, 1); }
function decrementTripCount(type) { modifyCount(type, -1); }
function updateTripCount(type) { ensureNonNegative(type); }

function modifyCount(type, delta) {
    const countBox = document.getElementById(`${type}-count`);
    countBox.value = Math.max(0, parseInt(countBox.value, 10) + delta);
}

function ensureNonNegative(type) {
    const countBox = document.getElementById(`${type}-count`);
    if (countBox.value < 0) countBox.value = 0;
}
// Function for lifestyle bucket
// Toggle dietary option highlighting and open slider
// Function for lifestyle bucket // Toggle dietary option highlighting and open slider
function toggleDietOption(option) {
    const optionElement = document.querySelector(`.diet-option[onclick="toggleDietOption('${option}')"]`);
    const sliderSection = document.getElementById(`${option}-slider`);
    const sliders = sliderSection.querySelectorAll('input[type="range"]');
    const valueDisplays = sliderSection.querySelectorAll('span[id$="-value"]');

    if (optionElement.classList.contains('active')) {
        // When closing the option
        optionElement.classList.remove('active');
        sliderSection.style.display = 'none';
        
        // Reset all sliders in this section to zero
        sliders.forEach(slider => {
            slider.value = 0;
        });

        // Reset all value displays to zero
        valueDisplays.forEach(display => {
            display.textContent = '0';
        });
    } else {
        // When opening the option
        optionElement.classList.add('active');
        sliderSection.style.display = 'block';
    }
}

// Rest of the code remains the same...
// Update slider values and display the value dynamically
function updateSliderValue(sliderId, messageId) {
    const slider = document.getElementById(sliderId);
    const valueDisplay = document.getElementById(`${sliderId}-value`);
    const message = document.getElementById(messageId);
    valueDisplay.textContent = slider.value;

    // Optional: Custom messages based on slider value
    if (messageId === 'vegan-message' && slider.value > 30) {
        message.textContent = 'Amazing! Keep up the incredible work!';
    }
}
// Handle fashion button selection
function selectFashionFrequency(frequency) {
    const buttons = document.querySelectorAll('.fashion-buttons button');
    buttons.forEach(button => button.classList.remove('active')); // Reset all buttons
    const selectedButton = document.querySelector(`.fashion-buttons button[onclick="selectFashionFrequency('${frequency}')"]`);
    selectedButton.classList.add('active');
}

// Handle compost button selection
function selectCompostOption(option) {
    const buttons = document.querySelectorAll('.compost-buttons button');
    buttons.forEach(button => button.classList.remove('active')); // Reset all buttons
    const selectedButton = document.querySelector(`.compost-buttons button[onclick="selectCompostOption('${option}')"]`);
    selectedButton.classList.add('active');
}
function showBucket(bucket) {
    const allBuckets = document.querySelectorAll('.bucket');
    const allNavIcons = document.querySelectorAll('.nav-icons div');

    // Hide all buckets and remove active class from navigation icons
    allBuckets.forEach(b => b.classList.remove('active'));
    allNavIcons.forEach(nav => nav.classList.remove('active'));

    // Show the selected bucket and activate the corresponding navigation icon
    document.getElementById(`bucket-${bucket}`).classList.add('active');
    document.getElementById(`nav-${bucket}`).classList.add('active');
}

// RESULTS PAGE CALCULATIONS
function calculateAndDisplayResults() {
    // Step 1: Show the Results Page first
    showBucket("result");

    // Step 2: Retrieve the user's name for personalization
    const userName = document.getElementById("personal-name").value;
    document.getElementById("personal-name-display").textContent = userName;

    // Step 3: Calculate each bucket's footprint
    const energyFootprint = calculateEnergyFootprint();
    const commuteFootprint = calculateCommuteFootprint();
    const travelFootprint = calculateTravelFootprint();
    const lifestyleFootprint = calculateLifestyleFootprint(); // Updated this line

    // Step 4: Calculate the total footprint
    const totalCarbonFootprint = (energyFootprint + commuteFootprint + travelFootprint + lifestyleFootprint)/1000;

    // Step 5: Display the total footprint on the results page
    document.getElementById("total-carbon-footprint").textContent = totalCarbonFootprint.toFixed(2);

    // Step 6: Display individual footprints
    document.getElementById("energy-footprint-value").textContent = energyFootprint.toFixed(2);
    document.getElementById("commute-footprint-value").textContent = commuteFootprint.toFixed(2);
    document.getElementById("travel-footprint-value").textContent = travelFootprint.toFixed(2);
    document.getElementById("lifestyle-footprint-value").textContent = lifestyleFootprint.toFixed(2); // Add this line
}
// FUNCTIONS FOR CHARTS
function createFootprintCharts() {
    console.log('Chart Creation Started');

    // Get chart containers
    const pieCtx = document.getElementById('footprintPieChart');
    const barCtx = document.getElementById('footprintBarChart');

    // Ensure Chart.js is loaded
    if (typeof Chart === 'undefined') {
        console.error('Chart.js is not loaded');
        return;
    }

    // Clear any existing charts on the result page
    if (pieCtx && pieCtx.chart) {
        pieCtx.chart.destroy();
    }
    if (barCtx && barCtx.chart) {
        barCtx.chart.destroy();
    }

    // Fetch values from the result page
    const totalCarbonElement = document.getElementById("total-carbon-footprint");
    const energyElement = document.getElementById("energy-footprint-value");
    const commuteElement = document.getElementById("commute-footprint-value");
    const travelElement = document.getElementById("travel-footprint-value");
    const lifestyleElement = document.getElementById("lifestyle-footprint-value");

    if (!totalCarbonElement || !energyElement || !commuteElement || !travelElement || !lifestyleElement) {
        console.error('One or more data elements are missing');
        return;
    }

    const energyFootprint = parseFloat(energyElement.textContent) || 0;
    const commuteFootprint = parseFloat(commuteElement.textContent) || 0;
    const travelFootprint = parseFloat(travelElement.textContent) || 0;
    const lifestyleFootprint = parseFloat(lifestyleElement.textContent) || 0;
    const totalCarbonFootprint = parseFloat(totalCarbonElement.textContent) || 0;

    // Create the Pie Chart
    if (pieCtx) {
        pieCtx.chart = new Chart(pieCtx, {
            type: 'pie',
            data: {
                labels: ['Energy', 'Commute', 'Travel', 'Lifestyle'],
                datasets: [{
                    data: [
                        energyFootprint / 1000,
                        commuteFootprint / 1000,
                        travelFootprint / 1000,
                        lifestyleFootprint / 1000
                    ],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Carbon Footprint Breakdown'
                    }
                }
            }
        });
    }

    // Create the Bar Chart
    if (barCtx) {
        barCtx.chart = new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: ['Global Average', 'Indian Average', 'Your Footprint'],
                datasets: [{
                    label: 'Carbon Footprint (Ton CO‚ÇÇe)',
                    data: [3.9, 1.6, totalCarbonFootprint],
                    backgroundColor: ['#FF6384', '#36A2EB', '#4BC0C0']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Ton CO‚ÇÇe'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Carbon Footprint Comparison'
                    }
                }
            }
        });
    }

    console.log('Charts Created Successfully');
}

// Update the calculation function
function calculateAndDisplayResults() {
    showBucket("result"); // Show the result page

    const userName = document.getElementById("personal-name").value;
    document.getElementById("personal-name-display").textContent = userName;

    const energyFootprint = calculateEnergyFootprint();
    const commuteFootprint = calculateCommuteFootprint();
    const travelFootprint = calculateTravelFootprint();
    const lifestyleFootprint = calculateLifestyleFootprint();

    const totalCarbonFootprint = (energyFootprint + commuteFootprint + travelFootprint + lifestyleFootprint) / 1000;

    document.getElementById("total-carbon-footprint").textContent = totalCarbonFootprint.toFixed(2);
    document.getElementById("energy-footprint-value").textContent = energyFootprint.toFixed(2);
    document.getElementById("commute-footprint-value").textContent = commuteFootprint.toFixed(2);
    document.getElementById("travel-footprint-value").textContent = travelFootprint.toFixed(2);
    document.getElementById("lifestyle-footprint-value").textContent = lifestyleFootprint.toFixed(2);

    createFootprintCharts(); // Call the chart creation function
}

// ENERGY FOOTPRINT CALCULATION
function calculateEnergyFootprint() {
    // Get electricity units from direct input or estimated input
    const electricityUnitsInput = document.getElementById('electricity-units');
    const estimatedUnitsInput = document.getElementById('estimated-units');
    
    // Emission factors
    const ELECTRICITY_EMISSION_FACTOR = 0.716; // tons of CO2 per unit
    const LPG_EMISSION_FACTOR = 44.446; // tons of CO2 per LPG cylinder
    
    // Calculate electricity carbon footprint
    let electricityFootprint = 0;
    if (electricityUnitsInput && electricityUnitsInput.value) {
        // Use direct electricity units input
        electricityFootprint = parseFloat(electricityUnitsInput.value) * ELECTRICITY_EMISSION_FACTOR;
    } else if (estimatedUnitsInput && estimatedUnitsInput.value) {
        // Use estimated electricity units input
        electricityFootprint = parseFloat(estimatedUnitsInput.value) * ELECTRICITY_EMISSION_FACTOR;
    }
    
    // Get number of LPG cylinders
    const lpgCylindersInput = document.getElementById('lpg-cylinders-value');
    const lpgCylinders = lpgCylindersInput ? parseInt(lpgCylindersInput.textContent || '0') : 0;
    
    // Calculate LPG carbon footprint
    const lpgFootprint = lpgCylinders * LPG_EMISSION_FACTOR;
    
    // Get number of people in household
    const householdInput = document.getElementById('household-value');
    const householdSize = householdInput ? parseInt(householdInput.textContent || '1') : 1;
    
    // Calculate total energy footprint
    const totalMonthlyEnergyFootprint = electricityFootprint + lpgFootprint;
    
    // Divide by household size and multiply by 12 to get annual footprint
    const annualEnergyFootprintPerPerson = (totalMonthlyEnergyFootprint / householdSize) * 12;
    
    return annualEnergyFootprintPerPerson;
}
function calculateCommuteFootprint() {
    // Robust default values and error handling
    const getElementValueOrDefault = (elementId, defaultValue = '0') => {
        const element = document.getElementById(elementId);
        return element ? (parseFloat(element.textContent || element.value || defaultValue) || 0) : 0;
    };

    // Get work from home days with robust selection
    const wfhDaysElement = document.getElementById('wfh-days-value');
    const workDays = wfhDaysElement 
        ? Math.max(0, 7 - parseInt(wfhDaysElement.textContent || '0')) 
        : 5; // Default to 5 work days if not found

    // Emission factors for different commute types (kg CO2 per km)
    const EMISSION_FACTORS = {
        walk: 0,                      // Walk/Cycle
        publicTransport: 0.027178,      // Public Transport
        twoWheelerElectric: 0.02864,  // Two Wheeler - Electric
        twoWheelerPetrol: 0.0448,     // Two Wheeler - Petrol
        threeWheeler: 0.10768,         // Three Wheeler
        carElectric: 0.0895,           // Electric Car
        carHatchback: 0.1441,          // Hatchback/Sedan
        carSUV: 0.20992                // SUV
    };

    // Initialize total commute footprint
    let totalCommuteFootprint = 0;

    // Robust function for calculating yearly distance
    const calculateYearlyDistance = (kmPerWorkDay) => workDays * kmPerWorkDay * 52;

    // Walk/Cycle Calculation
    const walkCycleKm = getElementValueOrDefault('walk-cycle-km-value');
    const yearlyWalkCycleDistance = calculateYearlyDistance(walkCycleKm);
    totalCommuteFootprint += yearlyWalkCycleDistance * EMISSION_FACTORS.walk;

    // Public Transport Calculation
    const publicTransportKm = getElementValueOrDefault('public-transport-km-value');
    const yearlyPublicTransportDistance = calculateYearlyDistance(publicTransportKm);
    totalCommuteFootprint += yearlyPublicTransportDistance * EMISSION_FACTORS.publicTransport;

    // Two Wheeler Calculation
    const twoWheelerKm = getElementValueOrDefault('two-wheeler-km-value');
    const twoWheelerElectricOption = document.querySelector('[onclick="selectTwoWheelerType(\'electric\')"]');
    const twoWheelerPetrolOption = document.querySelector('[onclick="selectTwoWheelerType(\'petrol\')"]');
    
    let twoWheelerEmissionFactor = EMISSION_FACTORS.twoWheelerPetrol; // Default to petrol
    if (twoWheelerElectricOption.style.borderColor === 'rgb(40, 167, 69)') {
        twoWheelerEmissionFactor = EMISSION_FACTORS.twoWheelerElectric;
    }
    
    const yearlyTwoWheelerDistance = calculateYearlyDistance(twoWheelerKm);
    totalCommuteFootprint += yearlyTwoWheelerDistance * twoWheelerEmissionFactor;

    // Three Wheeler Calculation
    const threeWheelerKm = getElementValueOrDefault('three-wheeler-km-value');
    const yearlyThreeWheelerDistance = calculateYearlyDistance(threeWheelerKm);
    totalCommuteFootprint += yearlyThreeWheelerDistance * EMISSION_FACTORS.threeWheeler;

    // Four Wheeler Calculation
    const fourWheelerKm = getElementValueOrDefault('four-wheeler-km-value');
    const passengerOptions = document.querySelectorAll('.passenger-option');
    let passengers = 1; // Default to 1
    
    passengerOptions.forEach((option, index) => {
        if (option.style.borderColor === 'rgb(40, 167, 69)') {
            passengers = index + 1;
        }
    });
    
    const carTypeOptions = document.querySelectorAll('.car-type-option');
    let carEmissionFactor = EMISSION_FACTORS.carHatchback; // Default to hatchback
    
    carTypeOptions.forEach(option => {
        if (option.style.borderColor === 'rgb(40, 167, 69)') {
            const type = option.textContent.toLowerCase();
            if (type.includes('electric')) {
                carEmissionFactor = EMISSION_FACTORS.carElectric;
            } else if (type.includes('suv')) {
                carEmissionFactor = EMISSION_FACTORS.carSUV;
            }
        }
    });

    const yearlyFourWheelerDistance = calculateYearlyDistance(fourWheelerKm);
    // Divide emission by number of passengers
    totalCommuteFootprint += (yearlyFourWheelerDistance * carEmissionFactor) / passengers;

    return parseFloat(totalCommuteFootprint.toFixed(2)); // Round to 2 decimal places
}
function calculateTravelFootprint() {
    // Travel emission data: [emissionFactor, id, tripDistance]
    const TRAVEL_DATA = [
        // Flights
        [0.121, 'shortHaul-count', 1000],    // Short Haul flights
        [0.121, 'mediumHaul-count', 2750],   // Medium Haul flights
        [0.0741, 'longHaul-count', 6500],    // Long Haul flights
        [0.007963, 'ultraLongHaul-count', 12000], // Ultra-long Haul flights

        // Trains
        [0.007963, 'shortTrain-count', 200],   // Short train journey
        [0.007963, 'mediumTrain-count', 400],  // Medium train journey
        [0.007963, 'longTrain-count', 1000],   // Long train journey

        // Gas Car Trips
        [0.1874, 'shortGasoline-count', 400],   // Short gas car trip
        [0.1874, 'mediumGasoline-count', 640],  // Medium gas car trip
        [0.1874, 'longGasoline-count', 1120],   // Long gas car trip

        // Electric Car Trips
        [0.0895, 'shortElectric-count', 400],   // Short electric car trip
        [0.0895, 'mediumElectric-count', 640],  // Medium electric car trip
        [0.0895, 'longElectric-count', 1120]    // Long electric car trip
    ];

    // Calculate total travel footprint
    const totalTravelFootprint = TRAVEL_DATA.reduce((total, [emissionFactor, id, distance]) => {
        const tripCountElement = document.getElementById(id);
        const tripCount = tripCountElement ? parseInt(tripCountElement.value || '0') : 0;
        
        // Calculate footprint for this type of travel
        const travelTypeFootprint = tripCount * distance * emissionFactor;
        
        return total + travelTypeFootprint;
    }, 0);

    return parseFloat(totalTravelFootprint.toFixed(2)); // Round to 2 decimal places
}
function calculateLifestyleFootprint() {
    // Meal-related emission factors
    const MEAL_EMISSION_FACTORS = {
        'vegan-meals': 0.575,
        'vegetarian-meals': 0.66,
        'ovoVegetarian-meals': 0.675,
        'nonVegetarian-meals': 0.71,
        'redMeat-meals': 1
    };

    // Calculate diet-related footprint
    const dietFootprint = Object.entries(MEAL_EMISSION_FACTORS).reduce((total, [mealId, emissionFactor]) => {
        const mealCountElement = document.getElementById(mealId);
        const mealCount = mealCountElement ? parseInt(mealCountElement.value || '0') : 0;
        return total + (mealCount * emissionFactor);
    }, 0);

    // Waste management calculation
    const compostOptionNo = document.querySelector('[onclick="selectCompostOption(\'no\')"]');
    const compostOptionYes = document.querySelector('[onclick="selectCompostOption(\'yes\')"]');
    
    const wasteEmissionFactor = {
        composting: 0.32, // kgCO2e per kg of waste
        landfilling: 1.29  // kgCO2e per kg of waste
    };
    const dailyWasteAmount = 0.2; // kgs per day
    
    let wasteFootprint = 0;
    if (compostOptionYes && compostOptionYes.style.borderColor === 'rgb(40, 167, 69)') {
        // Composting reduces emissions
        wasteFootprint = wasteEmissionFactor.composting * dailyWasteAmount * 365 * 0.2; // 80% reduction
    } else if (compostOptionNo && compostOptionNo.style.borderColor === 'rgb(40, 167, 69)') {
        // Landfilling with full emissions
        wasteFootprint = wasteEmissionFactor.landfilling * dailyWasteAmount * 365;
    }

    // Fashion footprint (set to 0 for now as requested)
    const fashionFootprint = 0;

    // Total lifestyle footprint
    const totalLifestyleFootprint = dietFootprint + wasteFootprint + fashionFootprint;

    return parseFloat(totalLifestyleFootprint.toFixed(2));
}
    </script>
</body>
</html>